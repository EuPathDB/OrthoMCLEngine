#!/usr/bin/perl

my ($prefix, $startId, $mclOutFile) = @ARGV;

&usage unless ($prefix && ($startId =~ /\d+/) && $mclOutFile);

if (! -f $mclOutFile) {
    die "'$mclOutFile' not found\n";
}

open MCLFILE, "$mclOutFile" or die "can not read '$mclOutFile'\n";
open GROUPFILE, ">${mclOutFile}.grp" or die "can not write to '${mclOutFile}.grp'\n";

while (<MCLFILE>) {
  s/\t/ /g;
  print GROUPFILE "$prefix$startId: $_";
  $startId++;
}

print "OrthoMCL groups written to ${mclOutFile}.grp\n";

sub usage {
  print "
mclOutput2groupsFile prefix starting_id_num mcl_output_file

create an orthomcl groups file from an mcl output file. just generate a group ID
for each group, and prepend it to that group's line.

where:
 prefix           a prefix to use when generating group ids.  For example OG2_
 starting_id_num  a number to start the id generating with.  For example 1000
 mcl_output_file  mcl output file (label mode)

std output: orthomcl groups file

an orthomcl group file has one line per group and looks like this:

OG2_1009: osa|ENS1222992 pfa|PF11_0844


";
  exit(1);
}
