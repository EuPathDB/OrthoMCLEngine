#!/usr/bin/perl

use strict;

&usage() unless scalar(@ARGV) == 2;

my $taxoncode = $ARGV[0];
my $inputfile = $ARGV[1];

open(IN, $inputfile) || die "Can't open input file '$inputfile'\n";
open(OUT, ">$taxoncode.fasta") || die "Can't open output file '$taxoncode.fasta'\n";

while(<IN>) {
  if (/\>\s*(\S)/) {
    print OUT ">$taxoncode|$1";
  } else {
    print OUT $_;
  }
}



sub usage {
print "
Create an OrthoMCL compliant .fasta file, by adjusting definition lines.

orthomclAdjustFasta taxoncode fasta_file

where:
  taxoncode:   a three or four letter unique abbreviation for the taxon
  fasta_file:  the input fasta file

Input file requirements:
  (1) .fasta format
  (2) a unique id is provided for each sequence, and is the first word on the definition line.

Output file format:
  (1) .fasta format
  (2) definition line is of the form: 
         >taxoncode|unique_protein_id

The output file is named taxoncode.fasta

Note: if your input files do not meet the requirements, you can do some simple perl or awk processing of them to create the required input files to this program, or the required output files.  This program is provided as a convenience, but OrthoMCL users are expected to have the scripting skills to provide OrthoMCL compliant .fasta files.

";
exit(1);
}
